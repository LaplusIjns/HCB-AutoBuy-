<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org">
<!--   -->
<div th:fragment="form1">

	<div class="offcanvas offcanvas-start" tabindex="-1"
		id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
		<div class="offcanvas-header offcanvasheadcolor">
			<h5 class="offcanvas-title" id="offcanvasExampleLabel">
				進階搜尋<i class="bi bi-sliders mx-2"></i>
			</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas"
				aria-label="Close"></button>
		</div>
		<div class="offcanvas-body offcanvasbodycolor">
			<form class="px-0 mx-0" id="form5">

				<div class="input-group mb-sm-3 offcanvasbodycolor ">
					<span class="input-group-text fs-5 rounded-0" id="">商品名字</span> <input
						type="text" id="formprodname" class="form-control fs-5 rounded-0"
						placeholder="關鍵字請用空格區分" aria-label="Username"
						aria-describedby="searchbar" list="datalistOptions">
					<!--               			<datalist id="datalistOptions" class="fs-5"> -->
					<!-- 						  <option value="San Francisco" style="color:red;">San Francisco</option> -->
					<!-- 						  <option value="New York">New York</option> -->
					<!-- 						  <option value="Seattle">Seattle</option> -->
					<!-- 						  <option value="Los Angeles">Los Angeles</option> -->
					<!-- 						  <option value="Chicago">Chicago</option> -->
					<!-- 						</datalist> -->
				</div>

				<div class="fs-5 mb-2">商品起始紀錄時間(選填)</div>

				<div class="row px-0 mx-0">
					<div class="col-5 px-0 mx-0">
						<div class="input-group date" id="datepicker1">
							<div class="input-group-append rounded-0">
								<span class="input-group-text bg-white d-block"> <i
									class="bi bi-calendar-event"></i>
								</span>
							</div>
							<input type="text" class="form-control rounded-0" id="startDate">
						</div>
					</div>
					<div class="col-2 text-center px-0 mx-0">~</div>
					<div class="col-5 px-0 mx-0">
						<div class="input-group date" id="datepicker2">
							<div class="input-group-append">
								<span class="input-group-text bg-white d-block rounded-0">
									<i class="bi bi-calendar-event"></i>
								</span>
							</div>
							<input type="text" class="form-control rounded-0" id="endDate">
						</div>
					</div>
				</div>

				<div class="fs-5 mb-2 mt-1">商品最後更新時間(選填)</div>

				<div class="row px-0 mx-0">
					<div class="col-5 px-0 mx-0">
						<div class="input-group date" id="datepicker3">
							<div class="input-group-append">
								<span class="input-group-text bg-white d-block rounded-0">
									<i class="bi bi-calendar-event-fill"></i>
								</span>
							</div>
							<input type="text" class="form-control rounded-0"
								id="startUpdate">
						</div>
					</div>
					<div class="col-2 text-center px-0 mx-0">~</div>
					<div class="col-5 px-0 mx-0">
						<div class="input-group date" id="datepicker4">
							<div class="input-group-append">
								<span class="input-group-text bg-white d-block rounded-0">
									<i class="bi bi-calendar-event-fill"></i>
								</span>
							</div>
							<input type="text" class="form-control rounded-0" id="endUpdate">
						</div>
					</div>
				</div>

				<div class="form-check fs-5 mt-3 mb-2">
					<input class="form-check-input rounded-0" type="checkbox" value=""
						id="sevenDay" checked> <label class="form-check-label"
						for="sevenDay"> 移除7天未更新商品</label>
				</div>

				<div class="form-check fs-5 mt-3 mb-2">
					<input class="form-check-input rounded-0" type="checkbox" value=""
						id="multiProd" checked> <label class="form-check-label"
						for="multiProd"> 移除可能包含複數單一商品 (尚未實裝) </label>
				</div>

				<div class="row px-0 mx-0 mb-3">
					<div class="col-5 px-0 mx-0">
						<div class="input-group">
							<div class="input-group-append">
								<span class="input-group-text bg-white d-block rounded-0">
									<i class="bi bi-currency-dollar"></i>
								</span>
							</div>
							<input type="number" class="form-control rounded-0"
								id="startPrice">
						</div>
					</div>
					<div class="col-2 text-center px-0 mx-0">~</div>
					<div class="col-5 px-0 mx-0">
						<div class="input-group ">
							<div class="input-group-append">
								<span class="input-group-text bg-white d-block rounded-0">
									<i class="bi bi-currency-dollar"></i>
								</span>
							</div>
							<input type="number" class="form-control rounded-0" id="endPrice">
						</div>
					</div>
				</div>
				<!--  -->
				<div class="input-group fs-5">
					<div class="input-group-btn">
						<div class="btn-group">
							<!-- 							<button tabindex="-1" class="btn btn-default" type="button">排序</button> -->
							<button tabindex="-1" data-toggle="dropdown"
								class="btn btn-default dropdown-toggle rounded-0 fs-5 "
								type="button" data-bs-toggle="dropdown" aria-expanded="false">
								<!-- 							<span class="visually-hidden">Toggle Dropdown</span> -->
								排序
							</button>

							<ul role="menu" id="orderul" class="dropdown-menu fs-5 rounded-0 ps-2" onclick="event.stopPropagation();" 
								aria-labelledby="dropdownmenu">

								<li class="orderli  form-check form-switch"><input type="checkbox" id="money_desc" class="form-check-input ordercheckbox" role="switch" value="a"><label
										class="form-check-label orderlb py-1" for="money_desc">價格從大到小</label><i class="bi bi-graph-down-arrow"></i>
								</li>
									
								<li class="orderli  form-check form-switch"><input type="checkbox" id="money_asc" class="form-check-input ordercheckbox" role="switch" value="b"><label
										class="form-check-label orderlb py-1" for="money_asc">價格從小到大</label><i class="bi bi-graph-up-arrow"></i>
								</li>
								
								<li class="orderli  form-check form-switch"><input type="checkbox" id="start_desc" class="form-check-input ordercheckbox" role="switch" value="e"><label
										class="form-check-label orderlb py-1" for="start_desc">起始紀錄時間從大到小(新產品優先)</label><i class="bi bi-graph-down-arrow"></i>
								</li>
									
								<li class="orderli  form-check form-switch"><input type="checkbox" id="start_asc" class="form-check-input ordercheckbox" role="switch" value="f"><label
										class="form-check-label orderlb py-1" for="start_asc">起始紀錄從小到大(舊產品優先)</label><i class="bi bi-graph-up-arrow"></i>
								
								<li class="orderli  form-check form-switch"><input type="checkbox" id="lastupdate_desc" class="form-check-input ordercheckbox" role="switch" value="c"><label
										class="form-check-label orderlb py-1" for="lastupdate_desc">更新時間從大到小(最新)</label><i class="bi bi-graph-down-arrow"></i>
								</li>
									
								<li class="orderli  form-check form-switch"><input type="checkbox" id="lastupdate_asc" class="form-check-input ordercheckbox" role="switch" value="d"><label
										class="form-check-label orderlb py-1" for="lastupdate_asc">更新時間從小到大(最舊)</label><i class="bi bi-graph-up-arrow"></i>
								</li>
								

							</ul>
						</div>
					</div>
					<input type="text" class="form-control rounded-0 dropdown-toggle" id="orderlist" data-bs-toggle="dropdown" data-toggle="dropdown"
						placeholder="順序會影響結果 先選優先權越大"> 
				</div>
				<!--  -->
			</form>
			<button id="prodsearch222"
				class="btn btn-secondary text-white m-3 px-3 rounded-0">
				<i class="bi bi-search"></i><br>
				<span class="">確定</span>
			</button>

			<div id="historySearch1" class="p-2 fs-4">
				<div class="btn-group   border border-secondary border-2 rounded-0"
					role="group">
					<span class="historyfind  p-2 ">asus</span>
					<button class="removethisbar btn btn-secondary rounded-0">Ｘ</button>
				</div>
				<div class="btn-group   border border-secondary border-2 rounded-0"
					role="group">
					<span class="historyfind  p-2 ">asus</span>
					<button class="removethisbar btn btn-secondary rounded-0">Ｘ</button>
				</div>
				<!--           HelloWorld -->
			</div>
		</div>
	</div>
	<script type="text/javascript">
		$(function() {

			(function($) {
				$.fn.datepicker.dates['zh-TW'] = {
					days : [ "星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六" ],
					daysShort : [ "週日", "週一", "週二", "週三", "週四", "週五", "週六" ],
					daysMin : [ "日", "一", "二", "三", "四", "五", "六" ],
					months : [ "一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月",
							"九月", "十月", "十一月", "十二月" ],
					monthsShort : [ "1月", "2月", "3月", "4月", "5月", "6月", "7月",
							"8月", "9月", "10月", "11月", "12月" ],
					today : "今天",
					monthsTitle : "月份",
					format : "yyyy/mm/dd",
					weekStart : 0,
					titleFormat : "yyyy年mm月",
					clear : "清除"
				};
			}(jQuery));

			$('#datepicker1').datepicker({
				clearBtn : true,
				language : "zh-TW"
			});
			$('#datepicker2').datepicker({
				clearBtn : true,
				language : "zh-TW"
			});
			$('#datepicker3').datepicker({
				clearBtn : true,
				language : "zh-TW"
			});
			$('#datepicker4').datepicker({
				clearBtn : true,
				language : 'zh-TW'
			});


					line = []; //中文描述
					line2 = []; // 對應值

				function checkorder(target){
					if(target=="a" && line2.includes("b")){
							$("#money_asc").prop('checked', false);
								for(var i=0; i<line.length; i++){
								if(line2[i]=="b"){
									line.splice(i,1)
									line2.splice(i,1)
									$("#orderlist").val(line);	
								}	
							}
					}
					if(target=="b" && line2.includes("a")){
							$("#money_desc").prop('checked', false);
							for(var i=0; i<line.length; i++){
								console.log("I" + line[i])
								if(line2[i]=="a"){
									line.splice(i,1)
									line2.splice(i,1)
									$("#orderlist").val(line);	
								}	
							}
					}
					if(target=="e" && line2.includes("f")){
						$("#start_asc").prop('checked', false);
							for(var i=0; i<line.length; i++){
							if(line2[i]=="f"){
								line.splice(i,1)
								line2.splice(i,1)
								$("#orderlist").val(line);	
							}	
						}
				}
				if(target=="f" && line2.includes("e")){
						$("#start_desc").prop('checked', false);
							for(var i=0; i<line.length; i++){
							if(line2[i]=="e"){
								line.splice(i,1)
								line2.splice(i,1)
								$("#orderlist").val(line);	
							}	
						}
				}
				if(target=="c" && line2.includes("d")){
					$("#lastupdate_asc").prop('checked', false);
						for(var i=0; i<line.length; i++){
						if(line2[i]=="d"){
							line.splice(i,1)
							line2.splice(i,1)
							$("#orderlist").val(line);	
						}	
					}
			}
				if(target=="d" && line2.includes("c")){
					$("#lastupdate_desc").prop('checked', false);
						for(var i=0; i<line.length; i++){
						if(line2[i]=="c"){
							line.splice(i,1)
							line2.splice(i,1)
							$("#orderlist").val(line);	
						}	
					}
			}

				}



					$(".ordercheckbox").on("click",function() {
						console.log("hello")
						console.log(line)
						console.log(line2)
						if ($(this).is(":checked")) {
							var xxx = $(this)[0].labels[0].innerHTML 
// 							console.log($(this)[0].labels[0].innerHTML)
							checkorder($(this).val())
							line2.push($(this).val())
							line.push(xxx)
							$("#orderlist").val(line);
							
							
						}else{
							var xxx = $(this)[0].labels[0].innerHTML 
							for(var i=0; i<line.length; i++){
								
								if(line[i]==xxx){
									
									line.splice(i,1)
									line2.splice(i,1)
									$("#orderlist").val(line);
									
									
								}
								
							}
						}
					});

		});
	</script>
</div>
<!--  -->